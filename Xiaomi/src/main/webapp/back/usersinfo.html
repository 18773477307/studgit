<table id="users_info" data-options="fit:true"></table>
<div id="show_usersInfo_find" style="width:100%,text-align:left;margin-top: 5px;">
	<span>会员姓名：</span><input type="text" id="usersName" class="" />
	<span>会员手机号：</span><input type="text" id="usersTel" />
	<span>会员邮箱：</span><input type="text" id="usersEmail" />
	<a href="javascript:findUsersInfoByInfo()" class="easyui-linkbutton" data-options="iconCls:'icon-search'">查询</a>
</div>
<script>
	var editRow = undefined;
	var datagrid;
	var op;
	var flag;
	var statusObj1=[{sid:0,sname:'已注销'},{sid:1,sname:'存在'}];
	var statusObj=[{sid:0,sname:'男'},{sid:1,sname:'女'}];
	$(function() {
		datagrid = $('#users_info').datagrid({
			url : 'back/user_getAllUsers.action',
			fitColumns : true,
			striped : true,
			loadMsg : "数据加载中",
			pagination : true,
			rownumbers : true,
			sortName : 'usersId',
			remoteSort : false,
			columns : [ [ {
				field : 'usersIds',
				title : '会员编号',
				width : 100,
				align : 'center',
				checkbox : true
			}, {
				field : 'usersId',
				title : '会员编号',
				align : 'center',
				width : 100
			}, {
				field : 'usersName',
				title : '会员姓名',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			}, {field : 'usersSex',title : '性别',width : 70,align : 'center',editor : {type:"combobox",options:{
				required:true,valueField:'sid',textField:'sname',data:statusObj}},
				formatter:function(value,row,index) {
					for (var i = 0; i < statusObj.length; i ++) {
						if (statusObj[i].sid == value) {
							return statusObj[i].sname;
						}
					}
					return value;
				}
			}, {
				field : 'usersTel',
				title : '会员手机号',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			}, {
				field : 'usersEmail',
				title : '会员邮箱',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					validType: 'email',  
					options : {
					request : true,
					validType:'email'
					}
				}
			}, {
				field : 'usersIDCard',
				title : '会员身份证号',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			},{
				field : 'usersPwd',
				title : '会员密码',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			}, {
				field : 'usersSta',
				title : '会员状态',
				width : 100,
				align : 'center',
				editor : {type:"combobox",options:{
					required:true,valueField:'sid',textField:'sname',data:statusObj1}},
					formatter:function(value,row,index) {
						for (var i = 0; i < statusObj1.length; i ++) {
							if (statusObj1[i].sid == value) {
								return statusObj1[i].sname;
							}
						}
						return value;
					}
			} ] ],
			toolbar : "#show_usersInfo_find" 
		});
	});
	
	
	function findUsersInfoByInfo(){
		var usersName = $("#usersName").val();
		var usersTel = $("#usersTel").val();
		var usersEmail = $("#usersEmail").val();
		
		$('#users_info').datagrid({
			url : 'back/user_findUsersInfoByInfo.action',
			queryParams:{usersName:usersName,usersTel:usersTel,usersEmail:usersEmail},
			fitColumns : true,
			striped : true,
			loadMsg : "数据加载中",
			pagination : true,
			rownumbers : true,
			sortName : 'usersId',
			remoteSort : false,
			columns : [ [ {
				field : 'usersIds',
				title : '会员编号',
				width : 100,
				align : 'center',
				checkbox : true
			}, {
				field : 'usersId',
				title : '会员编号',
				align : 'center',
				width : 100
			}, {
				field : 'usersName',
				title : '会员姓名',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			}, {field : 'usersSex',title : '性别',width : 70,align : 'center',editor : {type:"combobox",options:{
				required:true,valueField:'sid',textField:'sname',data:statusObj}},
				formatter:function(value,row,index) {
					for (var i = 0; i < statusObj.length; i ++) {
						if (statusObj[i].sid == value) {
							return statusObj[i].sname;
						}
					}
					return value;
				}
			}, {
				field : 'usersTel',
				title : '会员手机号',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			}, {
				field : 'usersEmail',
				title : '会员邮箱',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					validType: 'email',  
					options : {
					request : true,
					validType:'email'
					}
				}
			}, {
				field : 'usersIDCard',
				title : '会员身份证号',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			},{
				field : 'usersPwd',
				title : '会员密码',
				width : 100,
				align : 'center',
				editor : {
					type : "text",
					options : {
					request : true
					}
				}
			}, {
				field : 'usersSta',
				title : '会员状态',
				width : 100,
				align : 'center',
				editor : {type:"combobox",options:{
					required:true,valueField:'sid',textField:'sname',data:statusObj1}},
					formatter:function(value,row,index) {
						for (var i = 0; i < statusObj1.length; i ++) {
							if (statusObj1[i].sid == value) {
								return statusObj1[i].sname;
							}
						}
						return value;
					}
			} ] ],
			toolbar : "#show_usersInfo_find" 
		});
	}
</script>